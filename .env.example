# =============================================================================
# WebStock Environment Configuration
# =============================================================================
# Copy this file to .env and update values for your environment
# IMPORTANT: Never commit .env to version control!
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=WebStock
APP_VERSION=1.0.0
# Set to true for development, false for production
DEBUG=false
# Environment: development, staging, production
ENVIRONMENT=production

# =============================================================================
# Server Settings
# =============================================================================
HOST=0.0.0.0
PORT=8000

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
# PostgreSQL connection string (asyncpg driver for async support)
DATABASE_URL=postgresql+asyncpg://webstock:webstock@postgres:5432/webstock
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# PostgreSQL credentials (used by docker-compose)
POSTGRES_USER=webstock
POSTGRES_PASSWORD=change-this-secure-password
POSTGRES_DB=webstock

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://redis:6379/0
REDIS_POOL_SIZE=10

# Celery Redis URLs (separate databases for isolation)
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# =============================================================================
# JWT Configuration
# =============================================================================
# CRITICAL: Generate a strong secret key for production!
# Generate with: openssl rand -hex 32
# OR: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=generate-a-secure-random-key-here-minimum-32-characters
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# Security Settings
# =============================================================================
# bcrypt hash rounds (12 is recommended, higher = slower but more secure)
BCRYPT_ROUNDS=12

# Account lockout settings
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCK_MINUTES=15

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# AI Analysis Rate Limiting (per user)
AI_ANALYSIS_RATE_LIMIT=10
OPENAI_RATE_LIMIT=50

# =============================================================================
# CORS Settings
# =============================================================================
# Comma-separated list of allowed origins
# For production, replace with your actual domain(s)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://yourdomain.com

# =============================================================================
# External API Keys
# =============================================================================
# OpenAI API key for AI analysis
# Get your key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Optional: Base URL for OpenAI-compatible APIs (e.g., Azure OpenAI, local LLMs)
# Leave empty to use default OpenAI endpoint
OPENAI_API_BASE=

# Model to use for AI analysis
OPENAI_MODEL=gpt-4o-mini

# Max tokens for AI responses
OPENAI_MAX_TOKENS=2000

# Finnhub API key for real-time stock data
# Get your key at: https://finnhub.io/register
FINNHUB_API_KEY=your-finnhub-api-key-here

# Optional: Alpha Vantage API key for additional stock data
ALPHA_VANTAGE_API_KEY=

# Optional: TuShare token for Chinese market data
TUSHARE_TOKEN=

# Optional: Tiingo API key for US stock data (fallback provider)
# Get your key at: https://www.tiingo.com/
TIINGO_API_KEY=

# Optional: Polygon.io API key for news full content
# Get your key at: https://polygon.io/
POLYGON_API_KEY=

# =============================================================================
# Email Configuration (SMTP)
# =============================================================================
# Leave empty to disable email functionality
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@webstock.local

# =============================================================================
# Web Push Notifications (VAPID)
# =============================================================================
# Generate VAPID keys with: npx web-push generate-vapid-keys
# Or use: https://vapidkeys.com/
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_CLAIMS_EMAIL=admin@webstock.local

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =============================================================================
# First Admin Configuration
# =============================================================================
# Email address of the first admin user
# This user will be promoted to admin role on first startup (if no admins exist)
# The user must register first, then restart the server to be promoted
# FIRST_ADMIN_EMAIL=admin@example.com

# =============================================================================
# Production Checklist
# =============================================================================
# Before deploying to production, ensure:
# [ ] POSTGRES_PASSWORD is changed from default
# [ ] JWT_SECRET_KEY is a cryptographically secure random string
# [ ] DEBUG is set to false
# [ ] ENVIRONMENT is set to production
# [ ] CORS_ORIGINS contains only your actual domains
# [ ] All API keys are valid and not test keys
# [ ] SMTP settings are configured for email notifications
# [ ] VAPID keys are generated for push notifications
# [ ] SSL certificates are configured in nginx
# [ ] Database backups are configured
# [ ] Log rotation is configured
# =============================================================================
